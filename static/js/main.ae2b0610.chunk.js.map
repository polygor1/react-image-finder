{"version":3,"sources":["components/Searchbar.module.css","components/ImageGallery.module.css","components/ImageGalleryItem.module.css","components/Modal.module.css","components/ErrorSearch/ErrorSearch.module.css","components/Button.module.css","components/Searchbar.js","components/GetList.js","components/ImageGalleryItem.js","components/Loader.js","components/ErrorSearch/ErrorSearch.js","components/Modal.js","components/Button.js","components/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","state","query","handleChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","styles","this","SearchForm","type","SearchFormButton","SearchFormButtonText","SearchFormInput","placeholder","onChange","Component","DATA_URL","API_KEY","IMG_TYPE","IMG_ORIENT","GetList","page","a","url","fetch","response","json","data","Promise","reject","Error","ImageGalleryItem","src","alt","openModal","ImageGalleryItemImg","onClick","App","ErrorSearch","message","errorWrapper","role","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","Overlay","children","Button","onLeaveFeedback","ImageGallery","images","showModal","modalImgProps","status","fetchImages","nextQuery","then","hits","length","console","log","prevState","incrementPage","catch","reset","scrollDown","setTimeout","scrollTo","top","document","body","scrollHeight","left","behavior","handleLoadBtnClick","searchQuery","toggleModal","handleImgClick","prevProps","prevQuery","ModalImg","map","id","webformatURL","tags","largeImageURL","handleSearchFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"4IACAA,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,qBAAuB,wCAAwC,sBAAwB,yCAAyC,gBAAkB,qC,oBCA/SD,EAAOC,QAAU,CAAC,aAAe,mCAAmC,SAAW,iC,gBCA/ED,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,oBAAsB,gD,gBCAtGD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,iBCA3DD,EAAOC,QAAU,CAAC,aAAe,oC,gBCAjCD,EAAOC,QAAU,CAAC,OAAS,yB,4KCINC,E,4MACnBC,MAAQ,CACNC,MAAO,I,EAGTC,aAAe,SAAAC,GAEb,EAAKC,SAAS,CAAEH,MAAOE,EAAME,cAAcC,MAAMC,iB,EAGnDC,aAAe,SAAAL,GACb,IAAQF,EAAU,EAAKD,MAAfC,MACRE,EAAMM,iBAEe,KAAjBR,EAAMS,QAIV,EAAKC,MAAMC,SAASX,GACpB,EAAKG,SAAS,CAAEH,MAAO,MAJrBY,IAAMC,MAAM,gC,4CAOhB,WACE,OACE,wBAAQC,UAAWC,IAAOjB,UAA1B,SACE,uBAAMa,SAAUK,KAAKT,aAAcO,UAAWC,IAAOE,WAArD,UACE,wBAAQC,KAAK,SAASJ,UAAWC,IAAOI,iBAAxC,SACE,sBAAML,UAAWC,IAAOK,qBAAxB,sBAGF,uBACEN,UAAWC,IAAOM,gBAClBH,KAAK,OAGLI,YAAY,2BACZjB,MAAOW,KAAKjB,MAAMC,MAClBuB,SAAUP,KAAKf,wB,GArCYuB,a,gDCLjCC,EAAW,2BACXC,EAAU,qCACVC,EAAW,QACXC,EAAa,aAGJ,SAAeC,EAA9B,oC,4CAAe,WAAuB7B,EAAO8B,GAA9B,mBAAAC,EAAA,sEAELC,EAFK,UAEIP,EAFJ,uBAE2BE,EAF3B,wBAEmDC,EAFnD,cAEmE5B,EAFnE,iBAEiF8B,EAFjF,qBAFE,GAEF,gBAEkHJ,GAFlH,SAIYO,MAAMD,GAJlB,cAILE,EAJK,gBAKQA,EAASC,OALjB,cAKLC,EALK,yBAOJA,GAPI,2DAUJC,QAAQC,OAAO,IAAIC,MAAM,mBAVrB,2D,2CCFA,SAASC,EAAT,GAAyD,IAA7BC,EAA4B,EAA5BA,IAAKC,EAAuB,EAAvBA,IAAKV,EAAkB,EAAlBA,IAAKW,EAAa,EAAbA,UACxD,OACE,oBAAI7B,UAAWC,IAAOyB,iBAAtB,SACE,qBACE1B,UAAWC,IAAO6B,oBAClBH,IAAKA,EACLC,IAAKA,EACLG,QAAS,kBAAMF,EAAU,CAAEX,MAAKU,a,ICPnBI,E,4JACnB,WACE,OACE,4B,GAH2BtB,a,iBCAlB,SAASuB,EAAT,GAAmC,IAAZC,EAAW,EAAXA,QAGpC,OACE,sBAAKlC,UAAWC,IAAOkC,aAAcC,KAAK,QAA1C,UACE,4BAAIF,IACJ,qBAAKP,IALQ,qBAKOC,IAAI,a,qBCNTS,E,4MASnBC,cAAgB,SAAAlD,GACK,WAAfA,EAAMmD,MACR,EAAK3C,MAAM4C,W,EAIfC,oBAAsB,SAAArD,GAChBA,EAAME,gBAAkBF,EAAMsD,QAChC,EAAK9C,MAAM4C,W,uDAhBf,WACEG,OAAOC,iBAAiB,UAAW1C,KAAKoC,iB,kCAG1C,WACEK,OAAOE,oBAAoB,UAAW3C,KAAKoC,iB,oBAe7C,WACE,OACE,qBAAKtC,UAAWC,IAAO6C,QAASf,QAAS7B,KAAKuC,oBAA9C,SACE,qBAAKzC,UAAWC,IAAOoC,MAAvB,SAA+BnC,KAAKN,MAAMmD,iB,GAxBfrC,a,iBCApB,SAASsC,EAAT,GAAsC,IAApBC,EAAmB,EAAnBA,gBAC/B,OACE,wBACE7C,KAAK,SACLJ,UAAWC,IAAO+C,OAClBjB,QAAS,kBAAMkB,KAHjB,uB,ICKiBC,E,4MACnBjE,MAAQ,CACNkE,OAAQ,GACRnC,KAAM,EACNjB,MAAO,KACPqD,WAAW,EACXC,cAAe,CAAEnC,IAAK,GAAIU,IAAK,IAC/B0B,OAAQ,Q,EAcVC,YAAc,SAAAC,GACZzC,EAAQyC,EAAW,EAAKvE,MAAM+B,MAC3ByC,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACP,GAAoB,IAAhBA,EAAKC,OAEP,OAAOpC,QAAQC,OAAO,IAAIC,MAAM,kBAEhCmC,QAAQC,IAAI,SAAU,EAAK5E,MAAM+B,MAEjC,EAAK3B,UAAS,SAAAyE,GAAS,MAAK,CAC1BX,OAAO,GAAD,mBAAMW,EAAUX,QAAhB,YAA2BO,IACjCJ,OAAQ,eAEV,EAAKS,mBAGRC,OAAM,SAAAjE,GAAK,OAAI,EAAKV,SAAS,CAAEU,QAAOuD,OAAQ,iB,EAGnDS,cAAgB,WACd,EAAK1E,UAAS,SAAAyE,GAAS,MAAK,CAAE9C,KAAM8C,EAAU9C,KAAO,O,EAGvDiD,MAAQ,WACN,EAAK5E,SAAS,CAAE2B,KAAM,EAAGmC,OAAQ,M,EAGnCe,WAAa,WACXC,YAAW,WACTxB,OAAOyB,SAAS,CACdC,IAAKC,SAASC,KAAKC,aACnBC,KAAM,EACNC,SAAU,aAEX,M,EAGLC,mB,sBAAqB,4BAAA1D,EAAA,sDACbuC,EAAY,EAAK5D,MAAMgF,YAC7B,EAAKrB,YAAYC,GACjB,EAAKU,aAHc,2C,EAMrBW,YAAc,WACZ,EAAKxF,UAAS,kBAAoB,CAAE+D,WAAtB,EAAGA,e,EAGnB0B,eAAiB,SAAAlF,GACf,EAAKP,SAAS,CAAEgE,cAAezD,IAC/B,EAAKiF,e,+FA5DP,WAAyBE,GAAzB,iBAAA9D,EAAA,sDACQ+D,EAAYD,EAAUH,YACtBpB,EAAYtD,KAAKN,MAAMgF,YAEzBI,IAAcxB,IAChBtD,KAAK+D,QACL/D,KAAKb,SAAS,CAAEiE,OAAQ,YACxBpD,KAAKqD,YAAYC,IAPrB,gD,2EA+DA,WAAU,IAAD,OACP,EAA6CtD,KAAKjB,MAA1CkE,EAAR,EAAQA,OAAQpD,EAAhB,EAAgBA,MAAOuD,EAAvB,EAAuBA,OAAQF,EAA/B,EAA+BA,UAC/B,EAAqBlD,KAAKjB,MAAMoE,cAAxBnC,EAAR,EAAQA,IAAKU,EAAb,EAAaA,IAEb,MAAe,SAAX0B,EACK,wBAGM,YAAXA,EACK,cAAC,EAAD,IAGM,aAAXA,EACK,cAACrB,EAAD,CAAaC,QAASnC,EAAMmC,UAEtB,aAAXoB,EAEA,qCACGF,GACC,cAAC,EAAD,CAAOZ,QAAStC,KAAK2E,YAArB,SACE,qBAAKlD,IAAKT,EAAKU,IAAKA,EAAK5B,UAAWC,IAAOgF,aAG/C,oBAAIjF,UAAWC,IAAOiD,aAAtB,SACGC,EAAO+B,KAAI,gBAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,aAAcC,EAArB,EAAqBA,KAAMC,EAA3B,EAA2BA,cAA3B,OACV,cAAC5D,EAAD,CAEEC,IAAKyD,EACLlE,IAAKoE,EACL1D,IAAKyD,EACLxD,UAAW,EAAKiD,gBAJXK,QAQX,cAACnC,EAAD,CAAQC,gBAAiB/C,KAAKyE,6BAnBpC,M,GAxFsCjE,aCHrBsB,E,4MACnB/C,MAAQ,CACN2F,YAAa,I,EAGfW,uBAAyB,SAAAX,GACvB,EAAKvF,SAAS,CAAEuF,iB,4CAGlB,WACE,OACE,sBAAK5E,UAAU,MAAf,UACE,oBAAIA,UAAU,QAAd,0BACA,qCACE,cAAC,EAAD,CAAWH,SAAUK,KAAKqF,yBAC1B,cAAC,EAAD,CAAcX,YAAa1E,KAAKjB,MAAM2F,cACtC,cAAC,IAAD,c,GAhBuBlE,aCJjC8E,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFpB,SAASqB,eAAe,W","file":"static/js/main.ae2b0610.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1cXrN\",\"SearchForm\":\"Searchbar_SearchForm__CgxmG\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3-3h6\",\"SearchFormButtonText\":\"Searchbar_SearchFormButtonText__2ffRo\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__OdSmN\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1F4Nc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2Onk6\",\"ModalImg\":\"ImageGallery_ModalImg__2Y6RZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__19_YK\",\"ImageGalleryItemImg\":\"ImageGalleryItem_ImageGalleryItemImg__32loQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1GeJH\",\"Modal\":\"Modal_Modal__2jDnW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorWrapper\":\"ErrorSearch_errorWrapper__294oR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2d8T_\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Searchbar.module.css';\nimport { toast } from 'react-toastify';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = event => {\n    // отображалка для поля ввода\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    const { query } = this.state;\n    event.preventDefault();\n    // если пустышка - ругаемся\n    if (query.trim() === '') {\n      toast.error('Please, enter search query.');\n      return;\n    }\n    this.props.onSubmit(query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\n          <button type=\"submit\" className={styles.SearchFormButton}>\n            <span className={styles.SearchFormButtonText}>Search</span>\n          </button>\n\n          <input\n            className={styles.SearchFormInput}\n            type=\"text\"\n            // autocomplete=\"off\"\n            // autofocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","const DATA_URL = 'https://pixabay.com/api/';\nconst API_KEY = '24123899-30dafe3a116d297502be19e37'; //мой\nconst IMG_TYPE = 'photo';\nconst IMG_ORIENT = 'horizontal';\nconst PER_PAGE = 12;\n\nexport default async function GetList(query, page) {\n  try {\n    const url = `${DATA_URL}?image_type=${IMG_TYPE}&orientation=${IMG_ORIENT}&q=${query}&page=${page}&per_page=${PER_PAGE}&key=${API_KEY}`;\n\n    const response = await fetch(url); // получаем ответ от сервера\n    const data = await response.json(); // преобразуем в JSON\n\n    return data; // возвращаем полученные данные\n  } catch (error) {\n    // или ругаемся\n    return Promise.reject(new Error('Nothing found'));\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({ src, alt, url, openModal }) {\n  return (\n    <li className={styles.ImageGalleryItem}>\n      <img\n        className={styles.ImageGalleryItemImg}\n        src={src}\n        alt={alt}\n        onClick={() => openModal({ url, alt })}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\n// import Loader from 'react-loader-spinner';\n// import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default class App extends Component {\n  render() {\n    return (\n      <div>\n        {/* <Loader type=\"Wath\" color=\"#00BFFF\" height={100} width={100} /> */}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ErrorSearch.module.css';\n\nexport default function ErrorSearch({ message }) {\n  const errorImg = './images/error.png';\n\n  return (\n    <div className={styles.errorWrapper} role=\"alert\">\n      <p>{message}</p>\n      <img src={errorImg} alt=\"empty\" />\n    </div>\n  );\n}\n\nErrorSearch.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Modal.module.css';\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.Modal}>{this.props.children}</div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nexport default function Button({ onLeaveFeedback }) {\n  return (\n    <button\n      type=\"button\"\n      className={styles.Button}\n      onClick={() => onLeaveFeedback()}\n    >\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onLeaveFeedback: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGallery.module.css';\n\nimport GetList from './GetList';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Loader from './Loader';\nimport ErrorSearch from './ErrorSearch';\nimport Modal from './Modal';\nimport Button from './Button';\n\nexport default class ImageGallery extends Component {\n  state = {\n    images: [],\n    page: 1,\n    error: null,\n    showModal: false,\n    modalImgProps: { url: '', alt: '' },\n    status: 'idle',\n  };\n\n  async componentDidUpdate(prevProps) {\n    const prevQuery = prevProps.searchQuery;\n    const nextQuery = this.props.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      this.reset();\n      this.setState({ status: 'pending' });\n      this.fetchImages(nextQuery);\n    }\n  }\n\n  fetchImages = nextQuery => {\n    GetList(nextQuery, this.state.page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          // если ничего не пришло в ответе\n          return Promise.reject(new Error('Nothing found'));\n        } else {\n          console.log('page =', this.state.page); // номер листа в ответе\n\n          this.setState(prevState => ({\n            images: [...prevState.images, ...hits],\n            status: 'resolved',\n          }));\n          this.incrementPage();\n        }\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  };\n\n  incrementPage = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  reset = () => {\n    this.setState({ page: 1, images: [] });\n  };\n\n  scrollDown = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  handleLoadBtnClick = async () => {\n    const nextQuery = this.props.searchQuery;\n    this.fetchImages(nextQuery);\n    this.scrollDown();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleImgClick = props => {\n    this.setState({ modalImgProps: props });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, error, status, showModal } = this.state;\n    const { url, alt } = this.state.modalImgProps;\n\n    if (status === 'idle') {\n      return <div></div>;\n    }\n\n    if (status === 'pending') {\n      return <Loader />;\n    }\n\n    if (status === 'rejected') {\n      return <ErrorSearch message={error.message} />;\n    }\n    if (status === 'resolved') {\n      return (\n        <>\n          {showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={url} alt={alt} className={styles.ModalImg} />\n            </Modal>\n          )}\n          <ul className={styles.ImageGallery}>\n            {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n              <ImageGalleryItem\n                key={id}\n                src={webformatURL}\n                url={largeImageURL}\n                alt={tags}\n                openModal={this.handleImgClick}\n              />\n            ))}\n          </ul>\n          <Button onLeaveFeedback={this.handleLoadBtnClick} />\n        </>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  searchQuery: PropTypes.string,\n};\n","import './App.css';\n\nimport React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleSearchFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <h1 className=\"Title\">Image finder</h1>\n        <>\n          <Searchbar onSubmit={this.handleSearchFormSubmit} />\n          <ImageGallery searchQuery={this.state.searchQuery} />\n          <ToastContainer />\n        </>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}