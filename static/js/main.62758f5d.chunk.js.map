{"version":3,"sources":["components/ImageGallery.module.css","components/ImageGalleryItem.module.css","components/Modal.module.css","components/ErrorSearch/ErrorSearch.module.css","components/Button.module.css","components/Searchbar.js","components/GetList.js","components/ImageGalleryItem.js","components/Loader.js","components/ErrorSearch/ErrorSearch.js","components/Modal.js","components/Button.js","components/ImageGallery.js","App.js","index.js","components/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","styles","this","SearchForm","type","SearchFormButton","SearchFormButtonText","SearchFormInput","placeholder","onChange","Component","DATA_URL","API_KEY","IMG_TYPE","IMG_ORIENT","GetList","page","a","url","fetch","response","json","data","Promise","reject","Error","ImageGalleryItem","src","alt","openModal","ImageGalleryItemImg","onClick","App","color","height","width","timeout","ErrorSearch","message","errorWrapper","role","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","Overlay","children","Button","onLeaveFeedback","ImageGallery","images","showModal","modalImgProps","status","fetchImages","nextQuery","then","hits","length","console","log","prevState","incrementPage","catch","reset","scrollDown","setTimeout","scrollTo","top","document","body","scrollHeight","left","behavior","handleLoadBtnClick","searchQuery","toggleModal","handleImgClick","prevProps","prevQuery","ModalImg","map","id","webformatURL","tags","largeImageURL","handleSearchFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.62758f5d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2Onk6\",\"ModalImg\":\"ImageGallery_ModalImg__2Y6RZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__19_YK\",\"ImageGalleryItemImg\":\"ImageGalleryItem_ImageGalleryItemImg__32loQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1GeJH\",\"Modal\":\"Modal_Modal__2jDnW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorWrapper\":\"ErrorSearch_errorWrapper__294oR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2d8T_\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Searchbar.module.css';\nimport { toast } from 'react-toastify';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = event => {\n    // отображалка для поля ввода\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    const { query } = this.state;\n    event.preventDefault();\n    // если пустышка - ругаемся\n    if (query.trim() === '') {\n      toast.error('Please, enter search query.');\n      return;\n    }\n    this.props.onSubmit(query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\n          <button type=\"submit\" className={styles.SearchFormButton}>\n            <span className={styles.SearchFormButtonText}>Search</span>\n          </button>\n\n          <input\n            className={styles.SearchFormInput}\n            type=\"text\"\n            // autocomplete=\"off\"\n            // autofocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","const DATA_URL = 'https://pixabay.com/api/';\nconst API_KEY = '24123899-30dafe3a116d297502be19e37'; //мой\nconst IMG_TYPE = 'photo';\nconst IMG_ORIENT = 'horizontal';\nconst PERPAGE = 12;\n\nexport default async function GetList(query, page) {\n  try {\n    const url = `${DATA_URL}?image_type=${IMG_TYPE}&orientation=${IMG_ORIENT}&q=${query}&page=${page}&per_page=${PERPAGE}&key=${API_KEY}`;\n\n    const response = await fetch(url); // получаем ответ от сервера\n    const data = await response.json(); // преобразуем в JSON\n\n    return data; // возвращаем полученные данные\n  } catch (error) {\n    // или ругаемся\n    return Promise.reject(new Error('Nothing found'));\n  }\n}\n\n// const api = {\n//   GetList,\n// };\n\n// export default api;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({ src, alt, url, openModal }) {\n  return (\n    <li className={styles.ImageGalleryItem}>\n      <img\n        className={styles.ImageGalleryItemImg}\n        src={src}\n        alt={alt}\n        onClick={() => openModal({ url, alt })}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default class App extends Component {\n  render() {\n    return (\n      <div>\n        <Loader\n          type=\"ThreeDots\"\n          color=\"#df4e78\"\n          height={80}\n          width={80}\n          timeout={3000} //любуемся\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ErrorSearch.module.css';\n\nexport default function ErrorSearch({ message }) {\n  const errorImg = '../images/error.png';\n\n  return (\n    <div className={styles.errorWrapper} role=\"alert\">\n      <p>{message}</p>\n      <img src={errorImg} alt=\"empty\" />\n    </div>\n  );\n}\n\nErrorSearch.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Modal.module.css';\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.Modal}>{this.props.children}</div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nexport default function Button({ onLeaveFeedback }) {\n  return (\n    <button\n      type=\"button\"\n      className={styles.Button}\n      onClick={() => onLeaveFeedback()}\n    >\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onLeaveFeedback: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGallery.module.css';\n\nimport GetList from './GetList';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Loader from './Loader';\nimport ErrorSearch from './ErrorSearch';\nimport Modal from './Modal';\nimport Button from './Button';\n\nexport default class ImageGallery extends Component {\n  state = {\n    images: [],\n    page: 1,\n    error: null,\n    showModal: false,\n    modalImgProps: { url: '', alt: '' },\n    status: 'idle',\n  };\n\n  async componentDidUpdate(prevProps) {\n    const prevQuery = prevProps.searchQuery;\n    const nextQuery = this.props.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      this.reset();\n      this.setState({ status: 'pending' });\n      this.fetchImages(nextQuery);\n    }\n  }\n\n  fetchImages = nextQuery => {\n    GetList(nextQuery, this.state.page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          // если ничего не пришло в ответе\n          return Promise.reject(new Error('Nothing found'));\n        }\n        console.log('page =', this.state.page); // номер листа в ответе\n\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          status: 'resolved',\n        }));\n        this.incrementPage();\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  };\n\n  incrementPage = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  reset = () => {\n    this.setState({ page: 1, images: [] });\n  };\n\n  scrollDown = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  handleLoadBtnClick = async () => {\n    const nextQuery = this.props.searchQuery;\n    // this.incrementPage();\n    this.fetchImages(nextQuery);\n    this.scrollDown();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleImgClick = props => {\n    this.setState({ modalImgProps: props });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, error, status, showModal } = this.state;\n    const { url, alt } = this.state.modalImgProps;\n\n    if (status === 'idle') {\n      return <div></div>;\n    }\n\n    if (status === 'pending') {\n      return <Loader />;\n    }\n\n    if (status === 'rejected') {\n      return <ErrorSearch message={error.message} />;\n    }\n    if (status === 'resolved') {\n      return (\n        <>\n          {showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={url} alt={alt} className={styles.ModalImg} />\n            </Modal>\n          )}\n          <ul className={styles.ImageGallery}>\n            {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n              <ImageGalleryItem\n                key={id}\n                src={webformatURL}\n                url={largeImageURL}\n                alt={tags}\n                openModal={this.handleImgClick}\n              />\n            ))}\n          </ul>\n          <Button onLeaveFeedback={this.handleLoadBtnClick} />\n        </>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  searchQuery: PropTypes.string,\n};\n","import './App.css';\n\nimport React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleSearchFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <h1 className=\"Title\">Image finder</h1>\n        <>\n          <Searchbar onSubmit={this.handleSearchFormSubmit} />\n          <ImageGallery searchQuery={this.state.searchQuery} />\n          <ToastContainer />\n        </>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1cXrN\",\"SearchForm\":\"Searchbar_SearchForm__CgxmG\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3-3h6\",\"SearchFormButtonText\":\"Searchbar_SearchFormButtonText__2ffRo\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__OdSmN\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1F4Nc\"};"],"sourceRoot":""}