{"version":3,"sources":["components/ImageGallery.module.css","components/ImageGalleryItem.module.css","components/Modal.module.css","components/ErrorSearch/ErrorSearch.module.css","components/Button.module.css","components/Searchbar.js","components/getList.js","components/ImageGalleryItem.js","components/Loader.js","components/ErrorSearch/ErrorSearch.js","components/Button.js","components/Modal.js","components/ImageGallery.js","App.js","index.js","components/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","styles","this","SearchForm","type","SearchFormButton","SearchFormButtonText","SearchFormInput","autocomplete","autofocus","placeholder","onChange","Component","DATA_URL","API_KEY","IMG_TYPE","IMG_ORIENT","getList","page","a","url","fetch","response","json","data","Promise","reject","Error","ImageGalleryItem","src","alt","openModal","ImageGalleryItemImg","onClick","App","color","height","width","timeout","ErrorSearch","message","errorWrapper","role","Button","onLeaveFeedback","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","Overlay","children","ImageGallery","images","showModal","modalImgProps","status","fetchImages","nextQuery","fetchImg","then","hits","length","prevState","catch","incrementPage","reset","scrollDown","setTimeout","scrollTo","top","document","body","scrollHeight","left","behavior","handleLoadBtnClick","searchQuery","toggleModal","handleImgClick","prevProps","prevQuery","ModalImg","map","id","webformatURL","tags","largeImageURL","handleLoadMore","handleSearchFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5d668fa7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2Onk6\",\"ModalImg\":\"ImageGallery_ModalImg__2Y6RZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__19_YK\",\"ImageGalleryItemImg\":\"ImageGalleryItem_ImageGalleryItemImg__32loQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1GeJH\",\"Modal\":\"Modal_Modal__2jDnW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorWrapper\":\"ErrorSearch_errorWrapper__294oR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2d8T_\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Searchbar.module.css';\nimport { toast } from 'react-toastify';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = event => {\n    // отображалка для поля ввода\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    const { query } = this.state;\n    event.preventDefault();\n    // если пустышка - ругаемся\n    if (query.trim() === '') {\n      toast.error('Please, enter search query.');\n      return;\n    }\n    this.props.onSubmit(query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\n          <button type=\"submit\" className={styles.SearchFormButton}>\n            <span className={styles.SearchFormButtonText}>Search</span>\n          </button>\n\n          <input\n            className={styles.SearchFormInput}\n            type=\"text\"\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n            value={this.state}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","const DATA_URL = 'https://pixabay.com/api/';\nconst API_KEY = '24123899-30dafe3a116d297502be19e37'; //мой\nconst IMG_TYPE = 'photo';\nconst IMG_ORIENT = 'horizontal';\nconst PERPAGE = 12;\n\nexport async function getList(query, page) {\n  try {\n    const url = `${DATA_URL}?image_type=${IMG_TYPE}&orientation=${IMG_ORIENT}&q=${query}&page=${page}&per_page=${PERPAGE}&key=${API_KEY}`;\n\n    const response = await fetch(url); // получаем ответ от сервера\n    const data = await response.json(); // преобразуем в JSON\n\n    return data; // возвращаем полученные данные\n  } catch (error) {\n    // или ругаемся\n    return Promise.reject(new Error('Nothing found'));\n  }\n}\n\nconst api = {\n  getList,\n};\n\nexport default api;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({ src, alt, url, openModal }) {\n  return (\n    <li className={styles.ImageGalleryItem}>\n      <img\n        className={styles.ImageGalleryItemImg}\n        src={src}\n        alt={alt}\n        onClick={() => openModal({ url, alt })}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default class App extends Component {\n  render() {\n    return (\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#df4e78\"\n        height={80}\n        width={80}\n        timeout={3000} //любуемся\n      />\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ErrorSearch.module.css';\n\nexport default function ErrorSearch({ message }) {\n  const errorImg = '../images/error.png';\n\n  return (\n    <div className={styles.errorWrapper} role=\"alert\">\n      <p>{message}</p>\n      <img src={errorImg} alt=\"empty\" />\n    </div>\n  );\n}\n\nErrorSearch.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nexport default function Button({ onLeaveFeedback }) {\n  return (\n    <button\n      type=\"button\"\n      className={styles.Button}\n      onClick={() => onLeaveFeedback()}\n    >\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onLeaveFeedback: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Modal.module.css';\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.Modal}>{this.props.children}</div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGallery.module.css';\n\nimport { getList } from './getList';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Loader from './Loader';\nimport ErrorSearch from './ErrorSearch';\nimport LoadMoreBtn from './Button';\nimport Modal from './Modal';\n\nexport default class ImageGallery extends Component {\n  static propTypes = {\n    searchQuery: PropTypes.string,\n  };\n\n  state = {\n    images: [],\n    page: 1,\n    error: null,\n    showModal: false,\n    modalImgProps: { url: '', alt: '' },\n    status: 'idle',\n  };\n\n  async componentDidUpdate(prevProps) {\n    const prevQuery = prevProps.searchQuery;\n    const nextQuery = this.props.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      await this.reset();\n      this.setState({ status: 'pending' });\n      this.fetchImages(nextQuery);\n    }\n  }\n\n  fetchImages = nextQuery => {\n    const { page } = this.state;\n    getList\n      .fetchImg(nextQuery, page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          return Promise.reject(new Error('Nothing found'));\n        }\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          status: 'resolved',\n        }));\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  };\n\n  incrementPage = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  reset = () => {\n    this.setState({ page: 1, images: [] });\n  };\n\n  scrollDown = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  handleLoadBtnClick = async () => {\n    const nextQuery = this.props.searchQuery;\n    await this.incrementPage();\n    this.fetchImages(nextQuery);\n    this.scrollDown();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleImgClick = props => {\n    this.setState({ modalImgProps: props });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, error, status, showModal } = this.state;\n    const { url, alt } = this.state.modalImgProps;\n\n    if (status === 'idle') {\n      return <div></div>;\n    }\n\n    if (status === 'pending') {\n      return <Loader />;\n    }\n\n    if (status === 'rejected') {\n      return <ErrorSearch message={error.message} />;\n    }\n    if (status === 'resolved') {\n      return (\n        <>\n          {showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={url} alt={alt} className={styles.ModalImg} />\n            </Modal>\n          )}\n          <ul className={styles.ImageGallery}>\n            {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n              <ImageGalleryItem\n                key={id}\n                src={webformatURL}\n                url={largeImageURL}\n                alt={tags}\n                openModal={this.handleImgClick}\n              />\n            ))}\n          </ul>\n          <LoadMoreBtn handleLoadMore={this.handleLoadBtnClick} />\n        </>\n      );\n    }\n  }\n}\n","import './App.css';\n\nimport React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleSearchFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <h1 className=\"Title\">Image finder</h1>\n        <>\n          <Searchbar onSubmit={this.handleSearchFormSubmit} />\n          <ImageGallery searchQuery={this.state} />\n          <ToastContainer />\n        </>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1cXrN\",\"SearchForm\":\"Searchbar_SearchForm__CgxmG\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3-3h6\",\"SearchFormButtonText\":\"Searchbar_SearchFormButtonText__2ffRo\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__OdSmN\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1F4Nc\"};"],"sourceRoot":""}